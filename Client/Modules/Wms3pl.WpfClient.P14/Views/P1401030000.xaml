<?xml version="1.0" encoding="utf-8"?>
<uiLib:Wms3plUserControl x:Class="Wms3pl.WpfClient.P14.Views.P1401030000" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" xmlns:uiLib="clr-namespace:Wms3pl.WpfClient.UILib;assembly=Wms3pl.WpfClient.UILib" xmlns:controls="clr-namespace:Wms3pl.WpfClient.UILib.Controls;assembly=Wms3pl.WpfClient.UILib" xmlns:converters="clr-namespace:Wms3pl.WpfClient.Common.Converters;assembly=Wms3pl.WpfClient.Common" xmlns:common="clr-namespace:Wms3pl.WpfClient.Common;assembly=Wms3pl.WpfClient.Common" xmlns:viewModel="clr-namespace:Wms3pl.WpfClient.P14.ViewModel" xmlns:Properties="clr-namespace:Wms3pl.WpfClient.P14.Properties" xmlns:res="clr-namespace:Wms3pl.WpfClient.Resources;assembly=Wms3pl.WpfClient.Resources" x:Name="Window" Margin="0,0,0,0" HorizontalAlignment="Stretch" FontSize="18" MinWidth="800" controls:PermissionService.FunctionId="P1401030000" controls:PermissionService.FunctionName="盤點結果查詢" FormException="{Binding Exception}">
    <uiLib:Wms3plUserControl.DataContext>
        <viewModel:P1401030000_ViewModel x:Name="Vm" />
    </uiLib:Wms3plUserControl.DataContext>
    <uiLib:Wms3plUserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Wms3pl.WpfClient.UILib;component/Generic.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <common:NotConverter x:Key="NotConverter" />
            <converters:EnumToNotVisibilityConverter x:Key="EnumToNotVisibilityConverter" />
            <converters:DataGridRowNumberConverter x:Key="DataGridRowNumberConverter" />
            <converters:NameValuePairMultiConverter x:Key="NameValuePairMultiConverter" />
            <converters:StringToLocCodeConverter x:Key="StringToLocCodeConverter" />
            <FrameworkElement x:Key="ProxyElement" DataContext="{Binding}" />
            <Style TargetType="TextBox" BasedOn="{StaticResource TxtStyle}" x:Key="LargeTxtStyle">
                <Setter Property="Width" Value="180" />
            </Style>
            <Style TargetType="ComboBox" BasedOn="{StaticResource ComboStyle}" x:Key="LargeComboStyle">
                <Setter Property="Width" Value="180" />
            </Style>
        </ResourceDictionary>
    </uiLib:Wms3plUserControl.Resources>
    <telerik:RadBusyIndicator x:Name="GridBusyIndicator" BusyContent="{x:Static res:Resources.Loading}" IsIndeterminate="False" IsBusy="{Binding IsBusy}">
        <uiLib:BasicMaster x:Name="Master">
            <uiLib:BasicMaster.ToolBarArea>
                <WrapPanel>
                    <ContentControl Visibility="Collapsed" Content="{StaticResource ProxyElement}"/>
                    <Button Style="{StaticResource SearchButton}" controls:PermissionService.FunctionId="BP1401030002" Command="{Binding SearchCommand}"/>
                    <!--<Button Style="{StaticResource ImportButton}" controls:PermissionService.FunctionId="BP1401030003" Command="{Binding ImportCommand}" />
                    <Button Style="{StaticResource SaveButton}" controls:PermissionService.FunctionId="BP1401030001" Command="{Binding SaveCommand}" IsEnabled="{Binding Path=(Validation.HasError), ElementName=LayoutRoot, Converter={StaticResource NotConverter}}" />-->
                </WrapPanel>
            </uiLib:BasicMaster.ToolBarArea>
            <uiLib:BasicMaster.MainContent>
                <TabControl x:Name="LayoutRoot">
                    <TabControl.BindingGroup>
                        <BindingGroup Name="errorGroup" />
                    </TabControl.BindingGroup>
                    <TabItem Header="{x:Static res:Resources.Main}" Width="Auto">
                        <ScrollViewer>
                            <DockPanel>
                                <GroupBox Header="{x:Static res:Resources.QueryCondition}" DockPanel.Dock="Top" Margin="5,0,5,5">
                                    <DockPanel>
                                        <WrapPanel DockPanel.Dock="Top" Margin="5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                    <ColumnDefinition Width="auto" />
                                                </Grid.ColumnDefinitions>
                                                <Label      Grid.Row="0" Grid.Column="0" Content="{x:Static res:Resources.Dc}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                                                <ComboBox   Grid.Row="0" Grid.Column="1" Name="ComboBoxDc" MinWidth="100" Margin="5" Style="{StaticResource ComboStyle}" ItemsSource="{Binding DcList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding SelectedDc, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                                <Label      Grid.Row="1" Grid.Column="0" Content="盤點日期" Style="{StaticResource LbTitleStyle}" />
                                                <DatePicker Grid.Row="1" Grid.Column="1" Style="{StaticResource DateStyle}" SelectedDate="{Binding QueryInventorySDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                                                <Label      Grid.Row="1" Grid.Column="2" Content=" ~ " Style="{StaticResource LbStyle}" />
                                                <DatePicker Grid.Row="1" Grid.Column="3" Style="{StaticResource DateStyle}" SelectedDate="{Binding QueryInventoryEDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                                                <Label      Grid.Row="1" Grid.Column="4" Style="{StaticResource LbTitleStyle}" Content="{x:Static Properties:Resources.CheckTool}" />
                                                <ComboBox   Grid.Row="1" Grid.Column="5" Style="{StaticResource ComboStyle}"  ItemsSource="{Binding CheckToolList,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" SelectedValue="{Binding QueryCheckTool,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True,ValidatesOnExceptions=True,NotifyOnValidationError=True}" DisplayMemberPath="Name" SelectedValuePath="Value" />
                                                
                                                <Label      Grid.Row="2" Grid.Column="0" Content="盤點單號" Style="{StaticResource LbTitleStyle}" />
                                                <TextBox    Grid.Row="2" Grid.Column="1" MaxLength="20" Text="{Binding QueryInventoryNo,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource LargeTxtStyle}" />
                                                <Label      Grid.Row="2" Grid.Column="2" Content="處理單號" Style="{StaticResource LbTitleStyle}" />
                                                <TextBox    Grid.Row="2" Grid.Column="3" MaxLength="20" Text="{Binding QueryProcWmsNo,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource LargeTxtStyle}" />
                                                <Label      Grid.Row="2" Grid.Column="4" Content="品號" Style="{StaticResource LbTitleStyle}" />
                                                <TextBox    Grid.Row="2" Grid.Column="5" MaxLength="20" Text="{Binding QueryItemCode,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource LargeTxtStyle}" />
                                                <Button     Grid.Row="2" Grid.Column="6" Margin="4" Content="商品搜尋" Width="100" Height="30" Click="Button_Click" controls:PermissionService.FunctionId="BP1401030004"/>
                                            </Grid>
                                        </WrapPanel>
                                    </DockPanel>
                                </GroupBox>
                                <!--<DockPanel DockPanel.Dock="Top">-->
                                <GroupBox Header="{x:Static res:Resources.OueryResult}" DockPanel.Dock="Top" Margin="5,0,5,5">
                                    <DataGrid Style="{StaticResource DgStyle}" Margin="5"
                                              AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" 
                                              SelectionMode="Single" Height="200" 
                                              IsReadOnly="False" CellStyle="{StaticResource SingleClickEdit}" 
                                              ItemsSource="{Binding F140106QueryList, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                                              SelectedItem="{Binding SelectF140106Data, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="{x:Static res:Resources.ItemNumber}" IsReadOnly="True">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding Converter="{StaticResource DataGridRowNumberConverter}">
                                                        <Binding />
                                                        <Binding RelativeSource="{RelativeSource FindAncestor,AncestorType=DataGrid}" />
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="{x:Static Properties:Resources.QueryInventorySDate}" Binding="{Binding INVENTORY_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="{x:Static Properties:Resources.QueryInventoryNo}" Binding="{Binding INVENTORY_NO}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_CNT}" Binding="{Binding ITEM_CNT}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="差異筆數" Binding="{Binding ITEMQTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_QTY}" Binding="{Binding QTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點工具" Binding="{Binding CHECK_TOOL_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="單據狀態" Binding="{Binding STATUS_NAME}" IsReadOnly="True" />
                                            <DataGridComboBoxColumn SelectedValueBinding="{Binding INVENTORY_TYPE}" ItemsSource="{Binding DataContext.InventoryTypeList, Source={StaticResource ProxyElement}}" DisplayMemberPath="Name" SelectedValuePath="Value" Header="{x:Static Properties:Resources.INVENTORY_TYPE}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="備註" Binding="{Binding MEMO}" IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </GroupBox>
                                <!--自動倉明細-->
                                <GroupBox Visibility="{Binding AutomaticVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="{x:Static Properties:Resources.QueryDetailWareHouseList}" Grid.Column="0" Grid.Row="2" DockPanel.Dock="Top" >
                                    <DataGrid Style="{StaticResource DgStyle}"  Height="200"
                                              AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" 
                                              SelectionMode="Single" ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                              ItemsSource="{Binding InventoryDeatilList}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="{x:Static res:Resources.ItemNumber}" IsReadOnly="True">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding Converter="{StaticResource DataGridRowNumberConverter}">
                                                        <Binding />
                                                        <Binding RelativeSource="{RelativeSource FindAncestor,AncestorType=DataGrid}" />
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="倉別" Binding="{Binding WAREHOUSE_NAME}" IsReadOnly="True" Visibility="{Binding AutomaticVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                                            <DataGridTextColumn Header="儲位" Binding="{Binding LOC_CODE, Converter={StaticResource StringToLocCodeConverter}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="品號" Binding="{Binding ITEM_CODE}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="貨主品編" Binding="{Binding CUST_ITEM_CODE}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="國條" Binding="{Binding EAN_CODE1}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="條碼二" Binding="{Binding EAN_CODE2}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="條碼三" Binding="{Binding EAN_CODE3}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="品名" Binding="{Binding ITEM_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="效期" Binding="{Binding VALID_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="批號" Binding="{Binding MAKE_NO}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="入庫日期" Binding="{Binding ENTER_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="人員調整狀態" Binding="{Binding PERSON_CONFIRM_STATUS_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="實際盤點數量(B)" Binding="{Binding INVENTORY_QTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="系統庫存數(A)" Binding="{Binding DEVICE_STOCK_QTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點差異數(B-A)" Binding="{Binding DIFF_QTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="自動倉調整狀態">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding Converter="{StaticResource NameValuePairMultiConverter}">
                                                        <Binding Path="STATUS" />
                                                        <Binding Path="DataContext.StatusList" RelativeSource="{RelativeSource AncestorType={x:Type uiLib:Wms3plUserControl}}" />
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="WMS系統庫存數量(X)" Binding="{Binding QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS未搬動數(Y)" Binding="{Binding UNMOVE_STOCK_QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS系統庫存差異數(B-X-Y)" Binding="{Binding STOCK_DIFF_QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS調整狀態" Binding="{Binding WMS_STATUS_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="處理單號" Binding="{Binding PROC_WMS_NO}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點人員" Binding="{Binding INVENTORY_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點時間" Binding="{Binding INVENTORY_DATE,StringFormat=\{0:yyyy/MM/dd HH:mm:ss\}}" IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </GroupBox>
                                <!--人工倉明細-->
                                <GroupBox Visibility="{Binding ArtificialVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Header="{x:Static Properties:Resources.QueryDetailWareHouseList}" Grid.Column="0" Grid.Row="2" DockPanel.Dock="Top" >
                                    <DataGrid Style="{StaticResource DgStyle}"  Height="200"
                                              AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" 
                                              SelectionMode="Single" ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                              ItemsSource="{Binding InventoryDeatilList}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="{x:Static res:Resources.ItemNumber}" IsReadOnly="True">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding Converter="{StaticResource DataGridRowNumberConverter}">
                                                        <Binding />
                                                        <Binding RelativeSource="{RelativeSource FindAncestor,AncestorType=DataGrid}" />
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="倉別" Binding="{Binding WAREHOUSE_NAME}" IsReadOnly="True" Visibility="{Binding AutomaticVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                                            <DataGridTextColumn Header="儲位" Binding="{Binding LOC_CODE, Converter={StaticResource StringToLocCodeConverter}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="品號" Binding="{Binding ITEM_CODE}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="貨主品編" Binding="{Binding CUST_ITEM_CODE}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="國條" Binding="{Binding EAN_CODE1}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="條碼二" Binding="{Binding EAN_CODE2}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="條碼三" Binding="{Binding EAN_CODE3}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="品名" Binding="{Binding ITEM_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="效期" Binding="{Binding VALID_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="批號" Binding="{Binding MAKE_NO}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="入庫日期" Binding="{Binding ENTER_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="人員調整狀態" Binding="{Binding PERSON_CONFIRM_STATUS_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="實際盤點數量(B)" Binding="{Binding INVENTORY_QTY}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="WMS系統庫存數量(X)" Binding="{Binding QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS未搬動數(Y)" Binding="{Binding UNMOVE_STOCK_QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS系統庫存差異數(B-X-Y)" Binding="{Binding STOCK_DIFF_QTY}" IsReadOnly="True"/>
                                            <DataGridTextColumn Header="WMS調整狀態" Binding="{Binding WMS_STATUS_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="處理單號" Binding="{Binding PROC_WMS_NO}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點人員" Binding="{Binding INVENTORY_NAME}" IsReadOnly="True" />
                                            <DataGridTextColumn Header="盤點時間" Binding="{Binding INVENTORY_DATE,StringFormat=\{0:yyyy/MM/dd HH:mm:ss\}}" IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </GroupBox>
                                
                                <GroupBox Header="{x:Static Properties:Resources.InventoryDoc}" Grid.Column="0" Grid.Row="3" Margin="5,0,5,5">
                                    <DataGrid Style="{StaticResource DgStyle}" Margin="5" 
                                              AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False" 
                                              SelectionMode="Single" ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                              ItemsSource="{Binding InventoryDoc}">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="處理單號" Binding="{Binding WMS_NO}" IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </GroupBox>
                                <!--</DockPanel>-->
                            </DockPanel>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </uiLib:BasicMaster.MainContent>
        </uiLib:BasicMaster>
    </telerik:RadBusyIndicator>
</uiLib:Wms3plUserControl>