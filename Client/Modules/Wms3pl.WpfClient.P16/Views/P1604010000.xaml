<?xml version="1.0" encoding="utf-8"?>
<uiLib:Wms3plUserControl x:Class="Wms3pl.WpfClient.P16.Views.P1604010000" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d" xmlns:uiLib="clr-namespace:Wms3pl.WpfClient.UILib;assembly=Wms3pl.WpfClient.UILib" xmlns:controls="clr-namespace:Wms3pl.WpfClient.UILib.Controls;assembly=Wms3pl.WpfClient.UILib" xmlns:common="clr-namespace:Wms3pl.WpfClient.Common;assembly=Wms3pl.WpfClient.Common" xmlns:viewModel="clr-namespace:Wms3pl.WpfClient.P16.ViewModel" xmlns:Properties="clr-namespace:Wms3pl.WpfClient.P16.Properties" xmlns:res="clr-namespace:Wms3pl.WpfClient.Resources;assembly=Wms3pl.WpfClient.Resources" xmlns:converters="clr-namespace:Wms3pl.WpfClient.Common.Converters;assembly=Wms3pl.WpfClient.Common" xmlns:ucLibViews="clr-namespace:Wms3pl.WpfClient.UcLib.Views;assembly=Wms3pl.WpfClient.UcLib" xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" x:Name="Window" Margin="0,0,0,0" HorizontalAlignment="Stretch" FontSize="18" MinWidth="800" controls:PermissionService.FunctionId="P1604010000" controls:PermissionService.FunctionName="商品報廢單維護" FormException="{Binding Exception}">
  <uiLib:Wms3plUserControl.DataContext>
    <viewModel:P1604010000_ViewModel x:Name="Vm" />
  </uiLib:Wms3plUserControl.DataContext>
  <uiLib:Wms3plUserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Wms3pl.WpfClient.UILib;component/Generic.xaml" />
      </ResourceDictionary.MergedDictionaries>
      <common:NotConverter x:Key="NotConverter" />
      <converters:EnumToVisibilityConverter x:Key="EnumToVisibilityConverter" />
      <converters:EnumToNotVisibilityConverter x:Key="EnumToNotVisibilityConverter" />
      <converters:EnumToNotBooleanConverter x:Key="EnumToNotBooleanConverter" />
      <converters:DataGridRowNumberConverter x:Key="DataGridRowNumberConverter" />
      <converters:NameValuePairMultiConverter x:Key="NameValuePairMultiConverter" />
      <converters:BoolToVisiablityConverter x:Key="BoolToVisiablityConverter" />
      <converters:StringToLocCodeConverter x:Key="StringToLocCodeConverter"/>
      <FrameworkElement x:Key="ProxyElement" DataContext="{Binding}"></FrameworkElement>
      <Style TargetType="TextBox" BasedOn="{StaticResource TxtStyle}" x:Key="LargeTxtStyle">
        <Setter Property="Width" Value="180" />
      </Style>
      <Style TargetType="ComboBox" BasedOn="{StaticResource ComboStyle}" x:Key="LargeComboStyle">
        <Setter Property="Width" Value="180" />
      </Style>
      <Style x:Key="UcSingleRowEditScrap" TargetType="DataGridCell" BasedOn="{StaticResource SingleClickEdit}">
        <Style.Triggers>
          <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
              <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType=UserControl}, Path=DataContext.IsEditScrapDetails}" Value="True" />
              <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
            </MultiDataTrigger.Conditions>
            <Setter Property="IsEnabled" Value="False" />
            <Setter Property="Background" Value="{Binding DataGridRow.Background}" />
          </MultiDataTrigger>
        </Style.Triggers>
      </Style>
      <Style TargetType="ComboBox" x:Key="ScrapResonListSourceStyle">
        <Setter Property="ItemsSource" Value="{Binding DataContext.ScrapResonList,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type uiLib:Wms3plUserControl}}}" />
      </Style>
    </ResourceDictionary>
  </uiLib:Wms3plUserControl.Resources>
  <telerik:RadBusyIndicator x:Name="GridBusyIndicator" BusyContent="{x:Static res:Resources.Loading}" IsIndeterminate="False" IsBusy="{Binding IsBusy}">
    <uiLib:BasicMaster x:Name="Master">
      <uiLib:BasicMaster.ToolBarArea>
        <WrapPanel>
          <Button Style="{StaticResource SearchButton}" controls:PermissionService.FunctionId="BP1604010001" Command="{Binding SearchCommand}" />
          <Button Style="{StaticResource AddButton}" controls:PermissionService.FunctionId="BP1604010002" Command="{Binding AddCommand}" />
          <Button Style="{StaticResource EditButton}" controls:PermissionService.FunctionId="BP1604010003" Command="{Binding EditCommand}" />
          <Button Style="{StaticResource CancelButton}" controls:PermissionService.FunctionId="BP1604010004" Command="{Binding CancelCommand}" />
          <Button Style="{StaticResource DeleteButton}" controls:PermissionService.FunctionId="BP1604010005" Command="{Binding DeleteCommand}" />
          <Button Style="{StaticResource SaveButton}" controls:PermissionService.FunctionId="BP1604010006" Command="{Binding SaveCommand}" />
          <Button Style="{StaticResource ApproveButton}" Content="{x:Static Properties:Resources.UserOperateMode}" controls:PermissionService.FunctionId="BP1604010007" Command="{Binding ApproveCommand}" />
        </WrapPanel>
      </uiLib:BasicMaster.ToolBarArea>
      <uiLib:BasicMaster.MainContent>
        <TabControl x:Name="LayoutRoot">
          <TabControl.BindingGroup>
            <BindingGroup Name="errorGroup" />
          </TabControl.BindingGroup>
          <TabItem Header="{x:Static res:Resources.Main}" Width="Auto">
            <DockPanel>
              <ContentControl Visibility="Collapsed" Content="{StaticResource ProxyElement}"></ContentControl>
              <ScrollViewer>
                <DockPanel>
                  <DockPanel DockPanel.Dock="Top" HorizontalAlignment="Stretch" Background="Beige">
                    <WrapPanel HorizontalAlignment="Center">
                      <TextBlock Text="{x:Static Properties:Resources.CREATE_SCRAP_NO}" VerticalAlignment="Center" TextAlignment="Center" Margin="10,5,10,5">
                        <TextBlock.Style>
                          <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="Black" />
                            <Style.Triggers>
                              <DataTrigger Binding="{Binding UserOperateMode ,Converter={StaticResource EnumToNotBooleanConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}" Value="True">
                                <Setter Property="Foreground" Value="Red" />
                              </DataTrigger>
                            </Style.Triggers>
                          </Style>
                        </TextBlock.Style>
                      </TextBlock>
                      <TextBlock Text="&gt;&gt;" VerticalAlignment="Center" TextAlignment="Center" Margin="5" />
											<TextBlock Text="{x:Static Properties:Resources.ITEM_SEARCHRTN}" VerticalAlignment="Center" TextAlignment="Center" Margin="10,5,10,5" />
                    </WrapPanel>
                  </DockPanel>
                  <DockPanel DockPanel.Dock="Top" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                    <GroupBox Header="{x:Static res:Resources.QueryCondition}">
                      <DockPanel>
                        <Expander IsExpanded="{Binding SearchResultIsExpanded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding UserOperateMode,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                          <WrapPanel DockPanel.Dock="TOP" Margin="5">
                            <Grid>
                              <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                              </Grid.RowDefinitions>
                              <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                              </Grid.ColumnDefinitions>
                              <Label Grid.Row="0" Grid.Column="0" Content="{x:Static res:Resources.Dc}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <ComboBox Grid.Row="0" Grid.Column="1" MinWidth="150" HorizontalAlignment="Left" VerticalAlignment="Center" ItemsSource="{Binding Path=DcList}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding Path=SelectedDc, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                              <Label Grid.Row="0" Grid.Column="2" Content="{x:Static res:Resources.CRT_DATE}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <DatePicker Grid.Row="0" Grid.Column="3" SelectedDate="{Binding Path=CrtDateStart, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Style="{StaticResource DateStyle}" />
                              <Label Content=" ~ " Grid.Row="0" Grid.Column="4" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <DatePicker Grid.Row="0" Grid.Column="5" SelectedDate="{Binding Path=CrtDateEnd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DateStyle}" />
                              <Label Grid.Row="1" Grid.Column="0" Content="{x:Static Properties:Resources.ScrapNo}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding Path=ScrapNo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="165" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" MaxLength="20" InputMethod.IsInputMethodEnabled="False" />
                              <Label Grid.Row="1" Grid.Column="2" Content="{x:Static Properties:Resources.SelectSTATUS}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <ComboBox Grid.Row="1" Grid.Column="3" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource ComboStyle}" ItemsSource="{Binding Path=StatusList}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding Path=SelectedStatus, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                              <Label Grid.Row="1" Grid.Column="4" Content="{x:Static Properties:Resources.SearchCUST_ORD_NO}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <TextBox Grid.Row="1" Grid.Column="5" Text="{Binding Path=CustOrdNo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="150" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" MaxLength="20" InputMethod.IsInputMethodEnabled="False" />
                            </Grid>
                          </WrapPanel>
                        </Expander>
                      </DockPanel>
                    </GroupBox>
                  </DockPanel>
                  <DockPanel DockPanel.Dock="Top" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                    <GroupBox Header="{x:Static res:Resources.OueryResult}">
                      <DockPanel>
                        <Expander IsExpanded="True" Visibility="{Binding UserOperateMode,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                          <DataGrid Style="{StaticResource DgStyle}" Height="200" ItemsSource="{Binding ScrapList}" SelectedItem="{Binding SelectedScrap, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <DataGrid.Columns>
                              <DataGridTextColumn Header="{x:Static res:Resources.CRT_DATE}" Binding="{Binding CRT_DATE, StringFormat=\{0:yyyy/MM/dd HH:mm\}}" />
                              <DataGridTextColumn Header="{x:Static Properties:Resources.ScrapNo}" Binding="{Binding SCRAP_NO}" />
                              <DataGridTextColumn Header="{x:Static Properties:Resources.SearchCUST_ORD_NO}" Binding="{Binding CUST_ORD_NO}" />
                              <DataGridTextColumn Header="{x:Static Properties:Resources.SelectSTATUS}">
                                <DataGridTextColumn.Binding>
                                  <MultiBinding Converter="{StaticResource NameValuePairMultiConverter}">
                                    <Binding Path="STATUS" />
                                    <Binding Path="DataContext.StatusList" RelativeSource="{RelativeSource AncestorType={x:Type uiLib:Wms3plUserControl}}" />
                                  </MultiBinding>
                                </DataGridTextColumn.Binding>
                              </DataGridTextColumn>
                            </DataGrid.Columns>
                          </DataGrid>
                        </Expander>
                      </DockPanel>
                    </GroupBox>
                  </DockPanel>
                  <Border BorderBrush="Gray">
                    <DockPanel>
                      <WrapPanel DockPanel.Dock="TOP" Margin="5" IsEnabled="{Binding UserOperateMode ,Converter={StaticResource EnumToNotBooleanConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                        <Grid>
                          <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                          </Grid.RowDefinitions>
                          <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition Width="Auto" />
                          </Grid.ColumnDefinitions>
                          <Label Grid.Row="0" Grid.Column="0" Content="{x:Static res:Resources.Dc}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="0" Grid.Column="1" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}">
                            <TextBox.Text>
                              <MultiBinding Converter="{StaticResource NameValuePairMultiConverter}">
                                <Binding Path="SelectedScrap.DC_CODE" />
                                <Binding Path="DataContext.DcList" RelativeSource="{RelativeSource AncestorType={x:Type uiLib:Wms3plUserControl}}" />
                              </MultiBinding>
                            </TextBox.Text>
                          </TextBox>
                          <ComboBox Grid.Row="0" Grid.Column="1" MinWidth="150" HorizontalAlignment="Left" VerticalAlignment="Center" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" ItemsSource="{Binding Path=DcList}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding Path=CurrentScrap.DC_CODE, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                          <Label Grid.Row="0" Grid.Column="2" Content="{x:Static Properties:Resources.ScrapNo}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="0" Grid.Column="3" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.SCRAP_NO, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                          <Label Grid.Row="0" Grid.Column="4" Content="{x:Static Properties:Resources.SearchCUST_ORD_NO}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="0" Grid.Column="5" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.CUST_ORD_NO, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                          <Label Grid.Row="1" Grid.Column="0" Content="{x:Static res:Resources.CRT_STAFF}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="1" Grid.Column="1" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.CRT_NAME, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                          <Label Grid.Row="1" Grid.Column="2" Content="{x:Static Properties:Resources.CRT_DATE}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="1" Grid.Column="3" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.CRT_DATE, StringFormat=\{0:yyyy/MM/dd HH:mm\}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                          <Label Grid.Row="1" Grid.Column="4" Content="{x:Static Properties:Resources.SelectSTATUS}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="1" Grid.Column="5" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}">
                            <TextBox.Text>
                              <MultiBinding Converter="{StaticResource NameValuePairMultiConverter}">
                                <Binding Path="SelectedScrap.STATUS" />
                                <Binding Path="DataContext.StatusList" RelativeSource="{RelativeSource AncestorType={x:Type uiLib:Wms3plUserControl}}" />
                              </MultiBinding>
                            </TextBox.Text>
                          </TextBox>
                          <Label Grid.Row="2" Grid.Column="0" Content="{x:Static res:Resources.UPD_STAFF}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="2" Grid.Column="1" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.UPD_NAME, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                          <Label Grid.Row="2" Grid.Column="2" Content="{x:Static Properties:Resources.UPD_DATE}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                          <TextBox Grid.Row="2" Grid.Column="3" IsReadOnly="True" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Text="{Binding SelectedScrap.UPD_DATE, StringFormat=\{0:yyyy/MM/dd HH:mm\}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource LargeTxtStyle}" />
                        </Grid>
                      </WrapPanel>
                      <WrapPanel DockPanel.Dock="Top" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                        <Label Content="{Binding TotalDetailCount, UpdateSourceTrigger=PropertyChanged}" FontWeight="Bold" Foreground="Blue" Style="{StaticResource LbStyle}" Grid.ColumnSpan="2" />
                      </WrapPanel>
                      <GroupBox Header="{Binding QuoteHeaderText, UpdateSourceTrigger=PropertyChanged}" DockPanel.Dock="Top">
                        <DockPanel>
                          <GroupBox Header="{x:Static Properties:Resources.SCRAP_DETAIL}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}" DockPanel.Dock="Top" Margin="5,0" HorizontalAlignment="Left">
                            <Grid>
                              <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                                <RowDefinition Height="auto" />
                              </Grid.RowDefinitions>
                              <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                                                                <ColumnDefinition Width="auto" />
                                                                <ColumnDefinition Width="auto" />
                                                                <ColumnDefinition Width="auto" />
                                                            </Grid.ColumnDefinitions>
                              <Label Grid.Row="0" Grid.Column="0" Content="{x:Static Properties:Resources.ITEM_CODE}" HorizontalAlignment="Right"/>
                              <TextBox Grid.Row="0" Grid.Column="1" Width="215" Text="{Binding CurrentDetailRecord.ITEM_CODE, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" HorizontalAlignment="Left" Style="{StaticResource LargeTxtStyle}" MaxLength="20" InputMethod.IsInputMethodEnabled="False" >
                                <i:Interaction.Triggers>
                                  <i:EventTrigger EventName="LostFocus">
                                    <i:InvokeCommandAction Command="{Binding SearchOriCommand}" CommandParameter="ItemCode" />
                                  </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <TextBox.InputBindings>
                                  <KeyBinding Key="Enter" Command="{Binding SearchOriCommand}" CommandParameter="ItemCode" />
                                </TextBox.InputBindings>
                              </TextBox>
                              <Label Grid.Row="0" Grid.Column="2" Content="{x:Static Properties:Resources.ITEM_NAME}" HorizontalAlignment="Right"/>
                              <TextBox Grid.Row="0" Grid.Column="3" Width="470" Grid.ColumnSpan="3" Text="{Binding CurrentDetailRecord.ITEM_NAME, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Style="{StaticResource LargeTxtStyle}" IsEnabled="False" />
                              <Button Grid.Row="0" Grid.Column="8"  Width="100" Height="27" Content="{x:Static Properties:Resources.ItemQuery}" HorizontalAlignment="Left"  Click="Button_Click"/>
                              <Label Grid.Row="1" Grid.Column="0" Content="{x:Static Properties:Resources.SCRAP_CAUSE}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <ComboBox Grid.Row="1" Grid.Column="1" Width="215" Style="{StaticResource LargeComboStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" ItemsSource="{Binding Path=ScrapResonList}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding Path=CurrentDetailRecord.SCRAP_CAUSE, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" />
                              <Label Grid.Row="1" Grid.Column="2" Content="{x:Static Properties:Resources.WAREHOUSE_ID}" HorizontalAlignment="Right" Style="{StaticResource LbStyle}" />
                              <ComboBox Grid.Row="1" Grid.Column="3" Style="{StaticResource LargeComboStyle}" HorizontalAlignment="Left" VerticalAlignment="Center" ItemsSource="{Binding Path=WarehouseList}" DisplayMemberPath="Name" SelectedValuePath="Value" SelectedValue="{Binding Path=CurrentDetailRecord.WAREHOUSE_ID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}">
                                <i:Interaction.Triggers>
                                  <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding SearchOriCommand}" />
                                  </i:EventTrigger>
                                </i:Interaction.Triggers>
                              </ComboBox>
                              <Label Grid.Row="1" Grid.Column="4" HorizontalAlignment="Right" Content="{x:Static Properties:Resources.SearchLoc_Code}" />
                              <TextBox Grid.Row="1" Grid.Column="5" Text="{Binding CurrentDetailRecord.LOC_CODE, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" HorizontalAlignment="Left" Style="{StaticResource LargeTxtStyle}" MaxLength="14" InputMethod.IsInputMethodEnabled="False">
                                <i:Interaction.Triggers>
                                  <i:EventTrigger EventName="LostFocus">
                                    <i:InvokeCommandAction Command="{Binding SearchOriCommand}" />
                                  </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <TextBox.InputBindings>
                                  <KeyBinding Key="Enter" Command="{Binding SearchOriCommand}" />
                                </TextBox.InputBindings>
                              </TextBox>
                              <Label Grid.Row="2" Grid.Column="0" Content="{x:Static Properties:Resources.ALL_QTY}" />
                              <TextBox Grid.Row="2" Grid.Column="1" Width="215" Text="{Binding CurrentDetailRecord.ALL_QTY, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Style="{StaticResource LargeTxtStyle}" IsEnabled="False" />
                              <Label Grid.Row="2" Grid.Column="2" Content="{x:Static Properties:Resources.SCRAP_QTY}" />
                              <TextBox Grid.Row="2" Grid.Column="3" Text="{Binding CurrentDetailRecord.SCRAP_QTY, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,ValidatesOnExceptions=True, NotifyOnValidationError=True, ValidatesOnDataErrors=True}" HorizontalAlignment="Left" Style="{StaticResource LargeTxtStyle}" MaxLength="6" InputMethod.IsInputMethodEnabled="False" />
                            </Grid>
                          </GroupBox>
                          <WrapPanel Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}" DockPanel.Dock="Top" Margin="5" HorizontalAlignment="Left">
                            <Button Content="{x:Static Properties:Resources.AddDetail}" Width="100" Height="35" HorizontalAlignment="Left" Command="{Binding AddDetailCommand }" controls:PermissionService.FunctionId="BP1604010008" />
                            <Button Content="{x:Static Properties:Resources.MODIFY_DETAIL}" Width="100" Height="35" HorizontalAlignment="Left" Margin="10,0" Command="{Binding EditDetailCommand }" controls:PermissionService.FunctionId="BP1604010012" />
                            <Button Content="{x:Static Properties:Resources.DeltetDetail}" Width="100" Height="35" HorizontalAlignment="Left" Margin="10,0" Command="{Binding DeleteDetailCommand}" controls:PermissionService.FunctionId="BP1604010009" />
                            <Button Content="{x:Static Properties:Resources.CONFIRM_MODIFY}" Width="100" Height="35" HorizontalAlignment="Left" Margin="10,0" Command="{Binding SaveDetailCommand}" controls:PermissionService.FunctionId="BP1604010013" Visibility="{Binding IsEditScrapDetails, Converter={StaticResource BoolToVisiablityConverter}}"></Button>
                            <Button Content="{x:Static Properties:Resources.SCRAP_FILEIMPORT}" controls:PermissionService.FunctionId="BP1604010010" Command="{Binding ImportExcelCommand}" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Add}}" Width="110" Height="35" Margin="50,0,0,0" />
                            <Button Name="btnLockSearch" Content="{x:Static Properties:Resources.SCRAPITEM_LOCCODE_QUERY}" controls:PermissionService.FunctionId="BP1604010011" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}" Command="{Binding ScrapLocSearchCommand}" Width="150" Height="35" Margin="20,0,10,0" />
                          </WrapPanel>
                          <DockPanel DockPanel.Dock="Top">
                            <DataGrid Style="{StaticResource DgStyle}" SelectionMode="Single" Height="200" IsReadOnly="False" RowHeaderStyle="{StaticResource UcSingleRowHeaderEdit}" CellStyle="{StaticResource UcSingleRowEditScrap}" ItemsSource="{Binding ScrapDetailList,UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding SelectedScrapDetail, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="5" DockPanel.Dock="Top">
                              <DataGrid.Columns>
                                <DataGridCheckBoxColumn Binding="{Binding IsSelected,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding DataContext.UserOperateMode, Source={StaticResource ProxyElement},                            Converter={StaticResource EnumToNotVisibilityConverter}, ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                                  <DataGridCheckBoxColumn.HeaderTemplate>
                                    <DataTemplate>
                                      <CheckBox Content="{x:Static res:Resources.SelectAll}" IsChecked="{Binding DataContext.IsCheckAll, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl},Mode = TwoWay,UpdateSourceTrigger=PropertyChanged}"></CheckBox>
                                    </DataTemplate>
                                  </DataGridCheckBoxColumn.HeaderTemplate>
                                </DataGridCheckBoxColumn>
                                <DataGridTextColumn Header="{x:Static res:Resources.ItemNumber}" IsReadOnly="True">
                                  <DataGridTextColumn.Binding>
                                    <MultiBinding Converter="{StaticResource DataGridRowNumberConverter}">
                                      <Binding />
                                      <Binding RelativeSource="{RelativeSource FindAncestor,AncestorType=DataGrid}" />
                                    </MultiBinding>
                                  </DataGridTextColumn.Binding>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_CODE}" Binding="{Binding Item.ITEM_CODE}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_NAME}" Binding="{Binding Item.ITEM_NAME}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_SIZE}" Binding="{Binding Item.ITEM_SIZE}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_SPEC}" Binding="{Binding Item.ITEM_SPEC}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ITEM_COLOR}" Binding="{Binding Item.ITEM_COLOR}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.SCRAP_QTY}" Binding="{Binding Item.SCRAP_QTY}" IsReadOnly="{Binding DataContext.IsEditScrapDetails,                            Source={StaticResource ProxyElement},                            Converter={StaticResource NotConverter}}" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ALL_QTY}" Binding="{Binding Item.QTY}" IsReadOnly="True" Visibility="{Binding DataContext.UserOperateMode,                            Source={StaticResource ProxyElement},                            Converter={StaticResource EnumToNotVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.VALID_DATE}" Binding="{Binding Item.VALID_DATE, StringFormat=\{0:yyyy/MM/dd\}}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.SRC_WAREHOUSE_NAME}" IsReadOnly="True">
                                  <DataGridTextColumn.Binding>
                                    <MultiBinding Converter="{StaticResource NameValuePairMultiConverter}">
                                      <Binding Path="Item.WAREHOUSE_ID" />
                                      <Binding Path="DataContext.WarehouseList" RelativeSource="{RelativeSource AncestorType={x:Type uiLib:Wms3plUserControl}}" />
                                    </MultiBinding>
                                  </DataGridTextColumn.Binding>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="{x:Static Properties:Resources.SRC_LOC}" Binding="{Binding Item.LOC_CODE,Converter={StaticResource StringToLocCodeConverter}}" IsReadOnly="True" />
                                <DataGridComboBoxColumn Header="{x:Static Properties:Resources.SCRAP_CAUSE}" IsReadOnly="{Binding DataContext.IsEditScrapDetails, Source={StaticResource ProxyElement}, Converter={StaticResource NotConverter}}" SelectedValueBinding="{Binding Item.SCRAP_CAUSE, UpdateSourceTrigger=LostFocus, Converter={StaticResource StringEmptyToNullConverter}}" SelectedValuePath="Value" DisplayMemberPath="Name" EditingElementStyle="{StaticResource ScrapResonListSourceStyle}" ElementStyle="{StaticResource ScrapResonListSourceStyle}"></DataGridComboBoxColumn>
                                <DataGridTextColumn Header="{x:Static Properties:Resources.PALLET_CTRL_NO}" Binding="{Binding Item.PALLET_CTRL_NO}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.BOX_CTRL_NO}" Binding="{Binding Item.BOX_CTRL_NO}" IsReadOnly="True" />
                                <DataGridTextColumn Header="{x:Static Properties:Resources.MAKE_NO}" Binding="{Binding Item.MAKE_NO}" IsReadOnly="True" />
                            </DataGrid.Columns>
                            </DataGrid>
                          </DockPanel>
                          <DockPanel DockPanel.Dock="Top" Visibility="{Binding UserOperateMode ,Converter={StaticResource EnumToVisibilityConverter},ConverterParameter={x:Static uiLib:OperateMode.Query}}">
                            <DataGrid Style="{StaticResource DgStyle}" ItemsSource="{Binding AllocationList,UpdateSourceTrigger=PropertyChanged}" Margin="5" DockPanel.Dock="Top">
                              <DataGrid.Columns>
                                <DataGridTextColumn Header="{x:Static res:Resources.ItemNumber}" IsReadOnly="True">
                                  <DataGridTextColumn.Binding>
                                    <MultiBinding Converter="{StaticResource DataGridRowNumberConverter}">
                                      <Binding />
                                      <Binding RelativeSource="{RelativeSource FindAncestor,AncestorType=DataGrid}" />
                                    </MultiBinding>
                                  </DataGridTextColumn.Binding>
                                </DataGridTextColumn>
                                <DataGridTextColumn Header="{x:Static Properties:Resources.ALLOCATION_NO}" Binding="{Binding ALLOCATION_NO}" />
                              </DataGrid.Columns>
                            </DataGrid>
                          </DockPanel>
                        </DockPanel>
                      </GroupBox>
                    </DockPanel>
                  </Border>
                </DockPanel>
              </ScrollViewer>
            </DockPanel>
          </TabItem>
        </TabControl>
      </uiLib:BasicMaster.MainContent>
    </uiLib:BasicMaster>
  </telerik:RadBusyIndicator>
</uiLib:Wms3plUserControl>